<?php
namespace App\Model;

use Nette;

class [scaffold-entityName] extends BaseModel {
    
    private $id;
    [scaffold-entityAtributes]
    
    public function getId(){
	return $this->id;
    }
    [scaffold-entitySettersGetters]

    
    public function __construct(Nette\Database\Context $db, $id = NULL) {
	parent::__construct($db);
	if ($id != NULL) {
	    $this->id = $id;
	    $result = $this->db->fetch('SELECT [scaffold-entityAtributesComma] FROM [scaffold-entityName] WHERE id = ?', $this->getId());
	    if ($result == FALSE) {
		throw new ModelException("[scaffold-entityName] s id $id neexistuje.");
	    } else {
		foreach ($result AS $property => $value) {
		    $this->$property = $value;
		}
	    }
	}
    }

    public function save() {
	if ($this->id == NULL) {
	    $this->db->query('INSERT INTO [scaffold-entityName]', array(
		[scaffold-entityArray]
	    ));
	    $this->id = $this->db->getInsertId();
	} else {
	    $this->db->query('UPDATE [scaffold-entityName] SET ? WHERE id = ?', array(
		[scaffold-entityArray]
		    ), $this->getId());
	}
    }

    public function delete() {
	return $this->db->query('DELETE FROM [scaffold-entityName] WHERE id=?', $this->getId());
    }
}
?>