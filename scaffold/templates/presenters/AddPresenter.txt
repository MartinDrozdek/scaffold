<?php

namespace App\[scaffold-namespace]\Presenters;

use Nette, App\Model;

class AddPresenter extends Base[scaffold-entityName]Presenter{

    /** @var \App\[scaffold-namespace]\[scaffold-entityName]FormFactory @inject */
    public $[scaffold-entityName]FormFactory;

    public function createComponentForm(){
	$form = $this->[scaffold-entityName]FormFactory->create();
	$form->addSubmit('Add');
	return $form;
    }

    public function onSubmitAdd($form){
	$[scaffold-entityName] = new Model\[scaffold-entityName]($this->database);
	$values = $form->getValues();	
	$id = $[scaffold-entityName]->save(NULL,$values);
	$this->flashMessage('[scaffold-entityName] byl přidán.','success');
	$this->redirect('detail',array('id' => $id));
    }

    public function actionAdd(){
	$form = $this->getComponent('[scaffold-entityName]Form');
	$form->onSubmit[] = callback($this, 'onSubmitAdd');
    }
    
    public function actionDelete($id){
	$[scaffold-entityName] = new Model\[scaffold-entityName]($this->database);
	$[scaffold-entityName]->delete($id);
	$this->flashMessage('[scaffold-entityName] byl smazán.','success');
	$this->redirect('list');
    }
}
?>